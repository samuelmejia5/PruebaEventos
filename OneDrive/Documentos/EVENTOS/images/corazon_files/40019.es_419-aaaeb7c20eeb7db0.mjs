"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[40019],{140019:(e,a,t)=>{t.d(a,{Z:()=>N});var s=t(667294),l=t(616550),o=t(883119),n=t(488792),i=t(194093),r=t(400416),c=t(476198),_=t(144326),d=t(887103),p=t(801506),u=t(297728),m=t(961754),g=t(901450),P=t(410150),h=t(383399),x=t(26456),f=t(758339),v=t(785893);let b=function({onCancel:e,renderStep:a,onPreviousStep:t,currentStep:s}){let l=(0,_.ZP)(),n=["",l.bt("Paso 1 de 2", "Step 1 of 2", "settingParentalPasscode.step1", undefined, true),l.bt("Paso 2 de 2", "Step 2 of 2", "settingParentalPasscode.step2", undefined, true),""];return(0,v.jsx)(f.ZP,{accessibilityModalLabel:l.bt("Diálogo modal del código de acceso parental", "Parental Passcode Modal", "settings.parentalPasscodeModal.accessibilityLabel", undefined, true),align:"start",closeOnOutsideClick:!1,heading:(0,v.jsxs)(o.kC,{alignItems:"center",minHeight:16,children:[[1,2].includes(s)&&(0,v.jsx)(o.hU,{accessibilityLabel:l.bt("Volver", "Back", "navigation button", undefined, true),icon:"directional-arrow-left",onClick:t,size:"md"}),(0,v.jsx)(o.kC,{justifyContent:"center",width:"calc(100% - 60px)",children:(0,v.jsx)(o.xv,{align:"center",size:"300",weight:"bold",children:n[s]})})]}),isOpen:!0,onDismiss:()=>e?.(),size:"sm",children:(0,v.jsx)(o.xu,{paddingX:6,position:"relative",children:a(s)})})};var y=t(644182),z=t(969119),j=t(94757),A=t(632124);let w=function({title:e,onClickNextButton:a,onClickBackButton:t,isButtonDisabled:s,buttonText:l,renderContent:n,onCancel:i}){let r=(0,P.ml)(),c=(0,_.ZP)();return r?(0,v.jsx)(o.xu,{paddingX:4,children:(0,v.jsxs)(o.kC,{direction:"column",height:"100vh",justifyContent:"between",children:[(0,v.jsxs)(o.xu,{children:[(0,v.jsx)(j.default,{zIndexForGestaltBug:2,children:t?(0,v.jsx)(A.default,{disableRedirect:!0,heading:e,legoSettingsEnabled:!0,onTouch:()=>{t?.()}}):(0,v.jsx)(o.xu,{padding:2,paddingY:4,children:(0,v.jsx)(o.X6,{accessibilityLevel:1,align:"center",size:"400",children:e})})}),n]}),(0,v.jsx)(o.xu,{marginBottom:4,children:(0,v.jsx)(o.zx,{color:"red",disabled:s,fullWidth:!0,onClick:a,size:"lg",text:l})})]})}):(0,v.jsxs)(o.xu,{children:[(0,v.jsx)(o.X6,{accessibilityLevel:1,align:"center",size:"500",children:e}),(0,v.jsx)(o.xu,{paddingY:6,children:n}),(0,v.jsx)(o.xu,{marginBottom:8,children:(0,v.jsxs)(o.kC,{alignItems:"center",gap:2,justifyContent:"end",children:[i&&(0,v.jsx)(o.zx,{onClick:i,size:"lg",text:c.bt("Cancelar", "Cancel", "settings.parentalPasscodeModal.cancelButton", undefined, true)}),(0,v.jsx)(o.zx,{color:"red",disabled:s,onClick:a,size:"lg",text:l})]})})]})},k=function({onNextStep:e,onPreviousStep:a,onValidate:t,onChange:s,fields:l,isDisabled:i,isLoading:r,onCancel:c}){let d=(0,_.ZP)(),p=(0,P.ml)(),u=(0,n.Z)();return(0,z.Z)(()=>{u({event_type:13,view_type:666,view_parameter:4027})}),(0,v.jsx)(w,{buttonText:d.bt("Enviar correo", "Send email", "settingParentalPasscode.sendEmail", undefined, true),isButtonDisabled:i||r,onCancel:function(){u({event_type:p?102:101,view_type:666,element:73,view_parameter:4027}),c?.()},onClickBackButton:a,onClickNextButton:function(){u({event_type:p?102:101,view_type:666,element:96,view_parameter:4027}),e()},renderContent:(0,v.jsxs)(o.kC,{direction:"column",gap:6,children:[p&&(0,v.jsx)(o.xv,{size:"100",children:d.bt("Paso 2 de 2", "Step 2 of 2", "settingParentalPasscode.step2", undefined, true)}),(0,v.jsx)(o.xv,{color:p?"subtle":"dark",children:d.bt("Te enviaremos un correo electrónico para verificar esta dirección. Esta dirección de correo electrónico se eliminará de esta cuenta cuando se desactive el código de acceso parental.", "We’ll send you an email to verify this address. This email address will be removed from this account when parental passcode is turned off.", "settingParentalPasscode.emailInstructions", undefined, true)}),(0,v.jsx)(o.nv,{errorMessage:l.backupEmail.error,id:"backup-email",label:d.bt("Agrega un correo electrónico de respaldo", "Add your backup email", "settings.parentalPasscodeModal.backupEmailLabel", undefined, true),onBlur:t,onChange:({value:e})=>s("backupEmail",e),placeholder:"youremail@email.com",size:"lg",type:"text",value:l.backupEmail.value}),(0,v.jsx)(o.nv,{errorMessage:l.confirmBackupEmail.error,id:"confirm-backup-email",label:d.bt("Confirma el correo electrónico de respaldo", "Confirm your backup email", "settings.parentalPasscodeModal.confirmBackupEmailLabel", undefined, true),onBlur:t,onChange:({value:e})=>s("confirmBackupEmail",e),placeholder:"youremail@email.com",size:"lg",type:"text",value:l.confirmBackupEmail.value}),r&&(0,v.jsx)(y.Z,{accessibilityLabel:d.bt("Guardando el código de acceso parental", "Saving Parental passcode", "settings.parentalPasscodeModal.loadingI18nLabel", undefined, true)})]}),title:d.bt("Agrega una dirección de correo electrónico de respaldo", "Add a backup email address", "accountSettings.settingParentalPasscode.backupEmailTitle", undefined, true)})},C=function({onNextStep:e,onValidate:a,onPreviousStep:t,onChange:s,fields:l,isDisabled:i,onCancel:r}){let c=(0,_.ZP)(),d=(0,n.Z)(),p=(0,P.ml)();return(0,z.Z)(()=>{d({event_type:13,view_type:666,view_parameter:4026})}),(0,v.jsx)(w,{buttonText:c.bt("Siguiente", "Next", "settingParentalPasscode.next", undefined, true),isButtonDisabled:i,onCancel:function(){d({event_type:p?102:101,view_type:666,element:73,view_parameter:4026}),r?.()},onClickBackButton:t,onClickNextButton:function(){d({event_type:p?102:101,view_type:666,element:96,view_parameter:4026}),e()},renderContent:(0,v.jsxs)(o.kC,{direction:"column",gap:6,children:[p&&(0,v.jsx)(o.xv,{size:"100",children:c.bt("Paso 1 de 2", "Step 1 of 2", "settingParentalPasscode.step1", undefined, true)}),(0,v.jsx)(o.xv,{children:c.bt("Selecciona 4 dígitos que vayas a recordar.", "Select 4 digits that you’ll remember", "settingParentalPasscode.instruction", undefined, true)}),(0,v.jsx)(o.nv,{autoComplete:"off",errorMessage:l.passcode.error,id:"passcode",label:c.bt("Ingresa un código de 4 dígitos", "Enter a 4-digit code", "settings.parentalPasscodeModal.passcodeLabel", undefined, true),onBlur:a,onChange:({value:e})=>s("passcode",e),placeholder:"XXXX",size:"lg",type:"text",value:l.passcode.value}),(0,v.jsx)(o.nv,{autoComplete:"off",errorMessage:l.confirmPasscode.error,id:"confirm-passcode",label:c.bt("Confirma el código de cuatro dígitos", "Confirm your 4-digit code", "settings.parentalPasscodeModal.confirmPasscodeLabel", undefined, true),onBlur:a,onChange:({value:e})=>s("confirmPasscode",e),placeholder:"XXXX",size:"lg",type:"text",value:l.confirmPasscode.value})]}),title:c.bt("Crea un código de acceso", "Create your passcode", "accountSettings.settingParentalPasscode.secondStepTitle", undefined, true)})};var S=t(398183),B=t(267005),Z=t(26390);let E=function({onNextStep:e,onDisableSetting:a}){let{data:t,refresh:s}=(0,m.Z)({name:"ApiResource",options:{url:"/v3/users/me/",data:{fields:["user.is_parental_control_passcode_enabled","user.is_parental_control_passcode_verification_pending","user.parental_control_anonymized_email"]}}}),p=(0,_.ZP)(),u=(0,P.HG)(),x=(0,n.Z)(),f=(0,h.Z)(),{showToast:b}=(0,g.F9)(),y={isParentalControlPasscodeEnabled:t?.is_parental_control_passcode_enabled,isParentalControlPasscodeVerificationPending:t?.is_parental_control_passcode_verification_pending,parentalControlAnonymizedEmail:t?.parental_control_anonymized_email},{closeModal:w,setErrorMessage:k,setModalPropsAndOpen:C}=(0,S.J)();if((0,z.Z)(()=>{x({event_type:13,view_type:666,view_parameter:3860})}),!f.isAuth)return(0,v.jsx)(l.l_,{to:"/"});if(u||!f.isCandidateForParentalControlPasscode)return(0,v.jsx)(l.l_,{to:"/settings/account-settings"});let E=async e=>{try{await (0,r.Z)({url:"/v3/users/parental_control_passcode/disable/",method:"POST",data:{passcode:e,fields:["user.is_parental_control_passcode_enabled","user.is_parental_control_passcode_verification_pending"]}}),x({event_type:14660,view_type:7,view_parameter:3860,component:14456}),a(),s(),w(!0),b(({hideToast:e})=>(0,v.jsx)(c.Z,{duration:d.Jl,onHide:e,text:p.bt("El código de acceso está desactivado", "Passcode turned off", "parentalPasscodePage.passcodeRemoved", undefined, true)}))}catch(a){x({event_type:14661,view_type:7,view_parameter:3860,component:14456});let e=(0,i.Z)(a,"api_error_code");e===B.RR?k((0,i.Z)(a,"message")??""):e===B.mX?C({handlePasscodeSent:e=>{E(e)}}):b(({hideToast:e})=>(0,v.jsx)(c.Z,{duration:d.Jl,onHide:e,text:p.bt("¡Vaya! Se produjo un error.", "Hmm... Something went wrong.", "parentalPasscodePage.passcodeDisableFailure", undefined, true)}))}};return(0,v.jsxs)(o.xu,{paddingX:4,children:[(0,v.jsx)(j.default,{zIndexForGestaltBug:2,children:(0,v.jsx)(o.xu,{marginEnd:-2,marginStart:-2,children:(0,v.jsx)(A.default,{heading:p.bt("Código de acceso parental", "Parental passcode", "accountSettings.parentalPasscode.title", undefined, true),legoSettingsEnabled:!0,previousUrl:"/settings/account-settings",shouldUseFallbackUrl:!0})})}),(0,v.jsxs)(o.kC,{"data-test-id":"parental-passcode-off-toggle",justifyContent:"between",children:[(0,v.jsx)(o.__,{htmlFor:"passcode-toggle",children:(0,v.jsx)(o.xv,{size:"400",weight:"bold",children:p.bt("Código de acceso parental", "Parental passcode", "accountSettings.parentalPasscode.title", undefined, true)})}),(0,v.jsx)(o.rs,{disabled:y.isParentalControlPasscodeVerificationPending,id:"passcode-toggle",onChange:({value:a})=>{a?(x({event_type:106,view_type:666,element:13808,view_parameter:3860}),e()):(x({event_type:107,view_type:666,element:13808,view_parameter:3860}),C({handlePasscodeSent:e=>{E(e)}}))},switched:!!y.isParentalControlPasscodeVerificationPending||y.isParentalControlPasscodeEnabled})]}),(y.isParentalControlPasscodeVerificationPending||y.isParentalControlPasscodeEnabled)&&(0,v.jsx)(o.xu,{marginTop:7,children:(0,v.jsx)(Z.Z,{backupEmail:y.parentalControlAnonymizedEmail||""})})]})},L=function(){let e=(0,_.ZP)(),a=(0,l.k6)(),t=(0,P.ml)(),s=(0,n.Z)();return(0,z.Z)(()=>{s({event_type:13,view_type:666,view_parameter:4028})}),(0,v.jsx)(w,{buttonText:e.bt("Entendido", "Got it", "settingParentalPasscode.gotItButton", undefined, true),isButtonDisabled:!1,onClickNextButton:()=>{s({event_type:t?102:101,view_type:666,element:76,view_parameter:4028}),a.push("/settings/account-settings"),window.location.reload()},renderContent:(0,v.jsx)(o.xv,{color:t?"subtle":"dark",children:e.bt(" Enviamos un mensaje a la dirección de correo electrónico de respaldo que proporcionaste. Tendrás un día para confirmar la dirección y terminar de configurar el código de acceso parental.", " We’ve sent an email to the backup email address you provided. You’ll have 1 day to confirm your email and finish setting up your parental passcode.", "settingParentalPasscode.successDescription", undefined, true)}),title:e.bt("¡Ya casi terminas!", "You’re almost done", "accountSettings.settingParentalPasscode.lastStepTittle", undefined, true)})},D=function({onNextStep:e,onPreviousStep:a,onCancel:t}){let s=(0,_.ZP)(),l=(0,P.ml)(),i=(0,n.Z)();return(0,z.Z)(()=>{i({event_type:13,view_type:666,view_parameter:4025})}),(0,v.jsx)(w,{buttonText:s.bt("Siguiente", "Next", "settingParentalPasscode.next", undefined, true),isButtonDisabled:!1,onCancel:function(){i({event_type:l?102:101,view_type:666,element:73,view_parameter:4025}),t?.()},onClickBackButton:a,onClickNextButton:function(){i({event_type:l?102:101,view_type:666,element:96,view_parameter:4025}),e()},renderContent:(0,v.jsxs)(o.kC,{direction:"column",gap:4,children:[(0,v.jsx)(o.xv,{children:s.bt("Antes de configurar un código de acceso parental, ten en cuenta lo siguiente:", "Before you set up a parental passcode, please note the following:", "settingParentalPasscode.warning", undefined, true)}),(0,v.jsxs)(o.aV,{children:[(0,v.jsx)(o.aV.Item,{text:s.bt("Este código protegerá algunas configuraciones de gestión de la cuenta, privacidad y datos, así como de permisos sociales.", "Your code will protect some account management, privacy and data, and social permissions settings", "settingParentalPasscode.warningItem1", undefined, true)}),(0,v.jsx)(o.aV.Item,{text:s.bt("Los padres no obtendrán acceso adicional a esta cuenta.", "Parents won’t gain additional access to this account", "settingParentalPasscode.warningItem2", undefined, true)}),(0,v.jsx)(o.aV.Item,{text:s.bt("Los padres podrán desactivar el código de acceso parental en cualquier momento.", "Parents can turn off parental passcode at any time", "settingParentalPasscode.warningItem3", undefined, true)}),(0,v.jsx)(o.aV.Item,{text:s.bt("Cuando el titular de la cuenta cumpla 18 años, el código de acceso parental caducará automáticamente.", "When the account holder turns 18, parental passcode automatically expires", "settingParentalPasscode.warningItem4", undefined, true)})]})]}),title:s.bt("Configurar el código de acceso parental", "Setting up parental passcode", "accountSettings.settingParentalPasscode.title", undefined, true)})};var I=t(415787);let N=function({onCancel:e}){let[a,t]=(0,s.useState)(0),[f,y]=(0,s.useState)(!1),[z,j]=(0,s.useState)(!1),A=(0,h.Z)(),w=(0,g.F9)(),S=(0,_.ZP)(),B=(0,P.ZP)(),Z="desktop"===B?3669:3860,N=(0,n.Z)(),T=(0,l.k6)(),{checkExperiment:V}=(0,u.F)(),M="desktop"!==B,H=A.partner&&A.partner.is_linked_business?A.partner?.biz_ownership_email:A.email,{getValidators:X,getMatchingValidator:O}=(0,p.Z)(H||""),{data:F}=(0,m.Z)({name:"ApiResource",options:{url:"/v3/users/me/",data:{fields:["user.is_parental_control_passcode_enabled","user.is_parental_control_passcode_verification_pending","user.parental_control_anonymized_email"]}}}),[R,U]=(0,s.useState)({passcode:{value:""},confirmPasscode:{value:""},backupEmail:{value:""},confirmBackupEmail:{value:""}}),G=(e,a)=>{let t=a.replace(/\s/g,"");if(("passcode"===e||"confirmPasscode"===e)&&a.length>4)return;let s=X(e,R),l=(0,x.a3)(t,s),o={...R};o[e]={value:a,error:l},"backupEmail"===e&&l&&H===a&&N({event_type:14588,view_type:7,view_parameter:Z,component:14372}),U(o)},W=e=>{let a=R[e].value.replace(/\s/g,""),t=(0,x.a3)(a,[O(e,R)]),s={...R};s[e]={value:R[e].value,error:t},U(s)};function Y(){t(e=>e+1)}function J(){t(e=>{let a=e-1;return -1===a?(T.push("/settings/account-settings"),e):a})}let q=async()=>{if(!f){y(!0),N({event_type:"desktop"===B?101:102,view_type:7,view_parameter:Z,component:14372,element:12018});try{await (0,r.Z)({url:"/v3/users/parental_control_passcode/",method:"POST",data:{passcode_new:R.passcode.value,passcode_new_confirm:R.confirmPasscode.value,parent_email_new:R.backupEmail.value,parent_email_new_confirm:R.confirmBackupEmail.value,require_backup_email_verification:!0,fields:["user.is_parental_control_passcode_enabled","user.parental_control_anonymized_email"]}}),N({event_type:14589,view_type:7,view_parameter:Z,component:14372}),y(!1),Y()}catch(e){y(!1),(0,I.nP)("client.settings.parental_passcode.create_error",{sampleRate:1,tags:{apiErrorCode:(0,i.Z)(e,"api_error_code"),errorMessage:(0,i.Z)(e,"message"),deviceType:B}}),w.showOneToast(({hideToast:a})=>(0,v.jsx)(c.Z,{duration:d.Jl,onHide:a,text:(0,i.Z)(e,"message")||S.bt("¡Lo sentimos! Hubo un error en nuestros sistemas. Vuelve a intentarlo.", "Sorry! Something went wrong on our end. Please try again.", "settings.parentalPasscodeModal.somethingWentWrong", undefined, true),type:"error"}))}}},K=!R.passcode.value||!R.confirmPasscode.value,Q=!!R.passcode.error||!!R.confirmPasscode.error,$=K||Q,ee=!R.backupEmail.value||!R.confirmBackupEmail.value,ea=!!R.backupEmail.error||!!R.confirmBackupEmail.error,et=ee||ea;return M?F?.is_parental_control_passcode_enabled===void 0||F?.is_parental_control_passcode_verification_pending===void 0?null:(0,v.jsx)(o.xu,{"data-test-id":"parental-passcode-page",children:(e=>{let a=[()=>(0,v.jsx)(E,{onDisableSetting:()=>j(!0),onNextStep:Y}),()=>(0,v.jsx)(D,{onNextStep:Y,onPreviousStep:J}),()=>(0,v.jsx)(C,{fields:R,isDisabled:$,onChange:G,onNextStep:Y,onPreviousStep:J,onValidate:()=>W("confirmPasscode")}),()=>(0,v.jsx)(k,{fields:R,isDisabled:et,isLoading:f,onChange:G,onNextStep:q,onPreviousStep:J,onValidate:()=>W("confirmBackupEmail")}),()=>(0,v.jsx)(L,{})];F?.is_parental_control_passcode_enabled||F?.is_parental_control_passcode_verification_pending||z||!V("mweb_passcode_remove_step").anyEnabled||a.shift();let t=a[e];return t?t():null})(a)}):(0,v.jsx)(b,{currentStep:a,onCancel:e,onPreviousStep:J,renderStep:a=>{let t=[()=>(0,v.jsx)(D,{onCancel:e,onNextStep:Y,onPreviousStep:J}),()=>(0,v.jsx)(C,{fields:R,isDisabled:$,onCancel:e,onChange:G,onNextStep:Y,onPreviousStep:J,onValidate:()=>W("confirmPasscode")}),()=>(0,v.jsx)(k,{fields:R,isDisabled:et,isLoading:f,onCancel:e,onChange:G,onNextStep:q,onPreviousStep:J,onValidate:()=>W("confirmBackupEmail")}),()=>(0,v.jsx)(L,{})][a];return t?t():null}})}},26390:(e,a,t)=>{t.d(a,{Z:()=>d});var s=t(883119),l=t(488792),o=t(212515),n=t(144326),i=t(240760),r=t(635258),c=t(410150),_=t(785893);function d(e){let a=(0,n.ZP)(),t=(0,c.HG)(),d=(0,l.Z)(),p=t?3669:3860;return(0,o.Q)({view_type:7,view_parameter:p,component:14373}),(0,_.jsxs)(s.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,_.jsx)(s.kC,{direction:"column",children:(0,_.jsxs)(s.xu,{children:[(0,_.jsx)(s.xu,{marginBottom:2,children:!t&&(0,_.jsx)(s.xv,{color:"subtle",children:a.bt("Selecciona 4 dígitos que vayas a recordar. Si olvidas este código, puedes restablecerlo por correo electrónico.", "Select 4 digits that you’ll remember. If you forget this code, you can reset it via email.", "accountSettings.parentalPasscodeViewOnly.description", undefined, true)})}),(0,_.jsxs)(s.kC,{direction:"column",gap:6,children:[(0,_.jsx)(s.nv,{disabled:!0,id:"passcode",label:a.bt("Contraseña", "Passcode", "accountSettings.parentalPasscodeViewOnly.passcodeField", undefined, true),onChange:()=>{},size:"lg",type:"text",value:"****"}),(0,_.jsx)(s.nv,{disabled:!0,id:"backupEmail",label:a.bt("Correo electrónico de respaldo", "Backup email", "accountSettings.parentalPasscodeViewOnly.backupEmailField", undefined, true),onChange:()=>{},size:"lg",type:"text",value:e.backupEmail})]})]})}),!t&&(0,_.jsx)(s.xu,{alignItems:"center",direction:t?"row":"column",display:"flex",marginBottom:1,marginTop:8,children:(0,_.jsx)(s.xu,{flex:"grow",marginEnd:6,children:(0,_.jsx)(s.xv,{color:t?"default":"subtle",children:(0,i.XB)({text:a.bt("¿Olvidaste tu código de acceso? Visita nuestro <a id=\"1\">Centro de asistencia</a>.", "Forgot your passcode? Visit our <a id=\"1\">help center</a>.", "accountSettings.parentalPasscodeViewOnly.directToHelpCenterMobile", undefined, true),jsxReplacements:{1:({innerHtmlStrings:e})=>(0,_.jsx)(s.rU,{display:"inline",href:r.a$N,onClick:()=>{d({event_type:t?101:102,view_type:7,view_parameter:p,component:14373,element:12765})},target:"blank",children:e})}})})})})]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/40019.es_419-aaaeb7c20eeb7db0.mjs.map